name: Bug report (autofix-ready)
description: Bug report including user story + test case + bug description + test commands
labels:
  - bug
body:
  - type: input
    id: user_story
    attributes:
      label: User story issue (reference)
      description: Reference to the user story issue (use #123 format or full URL)
      placeholder: "#123"
    validations:
      required: true

  - type: input
    id: test_case
    attributes:
      label: Test case issue (reference)
      description: Reference to the test case that failed (use #123 format or full URL)
      placeholder: "#456"
    validations:
      required: true

  - type: textarea
    id: bug_description
    attributes:
      label: Bug description
      description: Explain the bug - what is the actual result vs expected result from the test case?
      placeholder: |
        Expected: <what should happen according to the test case>
        Actual: <what actually happens - the bug>

        Additional context: <any extra information that helps understand the bug>
    validations:
      required: true

  - type: input
    id: branch
    attributes:
      label: Branch where bug was discovered
      description: The branch where the bug was found. The fix will be created from this branch and the PR will target it.
      placeholder: "main"
    validations:
      required: false

  - type: input
    id: test_command_specific
    attributes:
      label: Test command (specific test for this bug)
      description: Command to run the specific test that verifies this bug. The action runs this BEFORE generating the fix to capture failure output.
      placeholder: 'npm run e2e:verification -- --grep "TC-1"'
    validations:
      required: false

  - type: input
    id: test_command_suite
    attributes:
      label: Test command (full suite for regression)
      description: Command to run the full test suite. The action runs this AFTER applying the fix to check for regressions.
      placeholder: "npm run e2e"
    validations:
      required: false

  - type: checkboxes
    id: autofix_gate
    attributes:
      label: Autofix gate
      description: Add the `autofix` label after filling this out to trigger the action.
      options:
        - label: I confirm this issue contains enough context for an automated fix
          required: false
